<!DOCTYPE HTML>
<html>
    <head>
        <meta charset="UTF-8" />

        <title>browser-based experiments</title>

        <!-- fonts from Google fonts -->
        <link href="https://fonts.googleapis.com/css?family=Noto+Sans:400,700|Noto+Serif:400,700|Playfair+Display:700" rel="stylesheet">

        <!-- css -->
        <link rel="stylesheet" type="text/css" href="styles/styles.css">

        <!-- js dependencies -->
        <script src="libraries/mustache/mustache.min.js"></script>
        <script src="libraries/jquery/dist/jquery.min.js"></script>
        <!-- This doesn't seem to be there on cloudflare -->
        <script src="libraries/csv-js/csv.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.5/lodash.js"></script>

        <!-- config -->
        <script src="config/config_deploy.js"></script>

        <!-- local js files -->
        <script src="scripts/main.js"></script>
        <script src="scripts/experiment.js"></script>
        <script src="scripts/helpers.js"></script>
        <script src="scripts/utils.js"></script>
        <script src="scripts/submit_to_server.js"></script>

        <!-- local trial_info files -->
        <!-- <script src="trial_info/main_trials.js"></script> -->
        <script src="trial_info/exp_sample.json"></script>
        <script src="trial_info/attention_checks.json"></script>
        <script src="trial_info/image_trials.js"></script>

        <!-- views -->
        <script src="views/views.js"></script>
    </head>

    <body>
        <noscript>This task requires JavaScript. Please enable JavaScript in your browser and reload the page. For more information on how to do that, please refer to
            <a href='https://enable-javascript.com' target='_blank'>enable-javascript.com</a>
        </noscript>

        <!-- views are inserted in main -->
        <main id='main'>
            Loading...
        </main>


        <!-- Introduction view -->
        <script id="intro-view" type="text/html">
            <div class='view'>
                {{# text }}
                <section class="text-container">
                    <p class="text">{{{ text }}}</p>
                </section>
                {{/ text }}
                <br>
                <p id="prolific-id-form">
                    <label for="prolific-id">Please, enter your Prolific ID</label>
                    <input type="text" id="prolific-id" />
                </p>
                {{# button }}
                <button id="next" class="nodisplay">{{ button }}</button>
                {{/ button }}
                {{^ button }}
                <button id="next">Next</button>
                {{/ button }}
                <br>
                {{# legal_info }}
                <section class="text-container">
                    <hr>
                    <br>
                    <p class="legal-text">{{{ legal_info }}}</p>
                </section>
                {{/ legal_info }}
            </div>
        </script>

        <!-- Instruction view -->
        <script id="instructions-view" type="text/html">
            <div class="view">
                <h1>Welcome to the study!</h1>
                <br>
                <section class="text-container">
                    <p class="text">
                        Please read the following instructions carefully, you will be able to proceed after <span id="timer">30</span> seconds.<br><br>
                        
                        People often show accuracy in personality ratings of others at zero acquaintance. In this study, you will see photos of faces and make basic judgments about them.<br><br>
                        
                        You will respond to each photo by pressing keys on your keyboard. You do not need to click your mouse to advance to the next question. Once you press the key on your keyboard your answer will be inputted into our system. Please make each judgment to best extent you can.<br><br>
                        
                        Please pay close attention as you will automatically advance from one set of judgments to the next.<br><br>
                        
                        Click below to continue.
                    </p>
                </section>
                <br>
                <button id="next" disabled>Continue</button>
            </div>
        </script>

        <!-- Practice trial view -->
        <script id="practice-view" type="text/html">
            <div class="view">
                <div style="text-align: center; padding: 50px;">
                    <h2>Practice Trial</h2>
                    <br>
                    <p class="text" style="font-size: 24px;">Please press "<strong>{{ key }}</strong>" on your keyboard.</p>
                </div>
            </div>
        </script>

        <!-- Instruction 2 view -->
        <script id="instructions2-view" type="text/html">
            <div class="view">
                <h1>You are now done with the practice trials.</h1>
                <br>
                <section class="text-container">
                    <p class="text">
                        You will now see a series of photos and you will respond to each question by pressing the key on your keyboard.<br><br>
                        
                        We realize some of these judgments may be difficult. Please remember, there are no right or wrong answers, just go with your gut instinct or feeling. <br>
                        You should work <strong>quickly</strong> but <strong>accurately</strong>.<br><br>
                        
                        Click below to begin.
                    </p>
                </section>
                <br>
                <button id="next">Continue</button>
            </div>
        </script>

        <!-- Sex block instruction view -->
        <script id="sex-block-instructions-view" type="text/html">
            <div class="view">
                <h1>Sex Judgment Task</h1>
                <br>
                <section class="text-container">
                    <p class="text">
                        In this section, you will see a series of photos. For each face, you will be categorizing each face as either Male or Female:<br><br>
                        Please respond using the associated keys on the keyboard:<br>
                        Press <strong>M</strong> for Male<br>
                        Press <strong>F</strong> for Female<br><br>
                        
                        Remember to respond <strong style="color: red;">AS QUICKLY AS POSSIBLE</strong>. Your response will be recorded automatically when you press the key.<br><br>
                        
                        Click below to begin.
                    </p>
                </section>
                <br>
                <button id="next">Begin</button>
            </div>
        </script>

        <!-- Sex block trial view -->
        <script id="sex-trial-view" type="text/html">
            <div class="view">
                <div style="text-align: center; margin-bottom: 30px;">
                    <img src="{{ image }}" alt="Person" style="max-width: 400px; max-height: 400px; border: 1px solid #ccc;">
                </div>
                <div style="text-align: center;">
                    <p class="question" style="font-size: 20px; margin-bottom: 20px;">Is this person Male or Female?</p>
                    <p style="font-size: 18px; color: #666;">Press <strong>M</strong> for Male | Press <strong>F</strong> for Female</p>
                </div>
            </div>
        </script>

        <!-- Gender block instruction view -->
        <script id="gender-block-instructions-view" type="text/html">
            <div class="view">
                <h1>Gender Judgment Task</h1>
                <br>
                <section class="text-container">
                    <p class="text">
                        In this section, you will see a series of photos. For each photo, you will be rating the extent to which you see each face as masculine/feminine.
                        <br><br>
                        
                        <strong>"How masculine/feminine is this person?"</strong><br><br>
                        
                        Please respond using the number keys <strong>1-7</strong> on the keyboard:<br>
                        <strong>1</strong> = Feminine<br>
                        <strong>7</strong> = Masculine<br><br>
                        
                        Your response will be recorded automatically when you press the key.<br><br>
                        
                        Click below to begin.
                    </p>
                </section>
                <br>
                <button id="next">Begin</button>
            </div>
        </script>

        <!-- Gender block trial view -->
        <script id="gender-trial-view" type="text/html">
            <div class="view">
                <div style="text-align: center; margin-bottom: 30px;">
                    <img src="{{ image }}" alt="Person" style="max-width: 400px; max-height: 400px; border: 1px solid #ccc;">
                </div>
                <div style="text-align: center;">
                    <p class="question" style="font-size: 20px; margin-bottom: 20px;">How masculine/feminine is this person?</p>
                    <div style="display: flex; justify-content: center; align-items: center; margin: 20px 0;">
                        <span style="font-size: 16px; margin-right: 20px;"><strong>Feminine</strong></span>
                        <span style="font-size: 16px; color: #666;">1 - 2 - 3 - 4 - 5 - 6 - 7</span>
                        <span style="font-size: 16px; margin-left: 20px;"><strong>Masculine</strong></span>
                    </div>
                    <p style="font-size: 16px; color: #666;">Press a number key (1-7) to respond</p>
                </div>
            </div>
        </script>

        <!-- Age block instruction view -->
        <script id="age-block-instructions-view" type="text/html">
            <div class="view">
                <h1>Age Judgment Task</h1>
                <br>
                <section class="text-container">
                    <p class="text">
                        In this section, you will see a series of photos. For each photo, you will be asked:<br><br>
                        
                        <strong>"How old does this person look to you?"</strong><br><br>
                        
                        Please enter a number (in years) in the textbox that appears below each image.<br><br>
                        
                        After entering your answer, press the <strong>Enter</strong> key or click the <strong>Continue</strong> button to proceed.<br><br>
                        
                        Click below to begin.
                    </p>
                </section>
                <br>
                <button id="next">Begin</button>
            </div>
        </script>

        <!-- Age block trial view -->
        <script id="age-trial-view" type="text/html">
            <div class="view">
                <div style="text-align: center; margin-bottom: 30px;">
                    <img src="{{ image }}" alt="Person" style="max-width: 400px; max-height: 400px; border: 1px solid #ccc;">
                </div>
                <div style="text-align: center;">
                    <p class="question" style="font-size: 20px; margin-bottom: 20px;">How old does this person look to you? Please enter a number (in years).</p>
                    <input type="number" id="age-input" min="0" max="120" style="font-size: 18px; padding: 10px; width: 150px; text-align: center;" placeholder="Age">
                    <br><br>
                    <button id="next" style="font-size: 16px; padding: 10px 20px;">Continue</button>
                    <p id="error" class="help-text" style="display: none; color: red; margin-top: 10px;">Please enter a valid age.</p>
                </div>
            </div>
        </script>

        <!-- AI block instruction view -->
        <script id="ai-block-instructions-view" type="text/html">
            <div class="view">
                <h1>Image Classification Task</h1>
                <br>
                <section class="text-container">
                    <p class="text">
                        In this final section, you will see a series of photos. For each photo, you will be asked:<br><br>
                        
                        <strong>"Which of the following statements do you think is true for the above image?"</strong><br><br>
                        
                        Press <strong>1</strong> for: This is an AI-generated image<br>
                        Press <strong>2</strong> for: This is an actual image captured by a camera<br><br>
                        
                        Your response will be recorded automatically when you press the key.<br><br>
                        
                        Click below to begin.
                    </p>
                </section>
                <br>
                <button id="next">Begin</button>
            </div>
        </script>

        <!-- AI block trial view -->
        <script id="ai-trial-view" type="text/html">
            <div class="view">
                <div style="text-align: center; margin-bottom: 30px;">
                    <img src="{{ image }}" alt="Person" style="max-width: 400px; max-height: 400px; border: 1px solid #ccc;">
                </div>
                <div style="text-align: center;">
                    <p class="question" style="font-size: 20px; margin-bottom: 5px;">Which of the following statements do you think is true for the above image?</p>
                    <p style="font-size: 18px; margin: 5px 0;"><strong>1</strong> - This is an AI-generated image</p>
                    <p style="font-size: 18px; margin: 5px 0;"><strong>2</strong> - This is an actual image captured by a camera</p>
                    <p style="font-size: 16px; color: #666;">Press <strong>1</strong> or <strong>2</strong> to respond</p>
                </div>
            </div>
        </script>

        <!-- Stage 1 view: Typicality ratings -->
        <script id="stage1-view" type="text/html">
        <div class="view">
            <!-- Image at the top -->
            <div style="text-align: center; margin-bottom: 20px;">
                <img src="{{ image }}" alt="Person" style="max-width: 350px; max-height: 350px; border: 1px solid #ccc;">
            </div>

            <!-- TODO: randomize questions -->

            <!-- Question 1: Man typicality -->
            <div class="question-box" style="margin-bottom: 10px;">
                <p class="question">{{{ q1 }}}</p>
                <ul class="answer-container likert">
                    <li class="labels1">{{ q1_slider_left }}</li>
                    <li><input type="radio" name="slider_q1" value="1" /></li>
                    <li><input type="radio" name="slider_q1" value="2" /></li>
                    <li><input type="radio" name="slider_q1" value="3" /></li>
                    <li><input type="radio" name="slider_q1" value="4" /></li>
                    <li><input type="radio" name="slider_q1" value="5" /></li>
                    <li><input type="radio" name="slider_q1" value="6" /></li>
                    <li><input type="radio" name="slider_q1" value="7" /></li>
                    <li class="labels1">{{ q1_slider_right }}</li>
                </ul>
            </div>

            <!-- Question 2: Woman typicality -->
            <div class="question-box" style="margin-bottom: 10px;">
                <p class="question">{{{ q2 }}}</p>
                <ul class="answer-container likert">
                    <li class="labels1">{{ q1_slider_left }}</li>
                    <li><input type="radio" name="slider_q2" value="1" /></li>
                    <li><input type="radio" name="slider_q2" value="2" /></li>
                    <li><input type="radio" name="slider_q2" value="3" /></li>
                    <li><input type="radio" name="slider_q2" value="4" /></li>
                    <li><input type="radio" name="slider_q2" value="5" /></li>
                    <li><input type="radio" name="slider_q2" value="6" /></li>
                    <li><input type="radio" name="slider_q2" value="7" /></li>
                    <li class="labels1">{{ q1_slider_right }}</li>
                </ul>
            </div>

            <!-- Question 3: Nonbinary person typicality -->
            <div class="question-box" style="margin-bottom: 10px;">
                <p class="question">{{{ q3 }}}</p>
                <ul class="answer-container likert">
                    <li class="labels1">{{ q1_slider_left }}</li>
                    <li><input type="radio" name="slider_q3" value="1" /></li>
                    <li><input type="radio" name="slider_q3" value="2" /></li>
                    <li><input type="radio" name="slider_q3" value="3" /></li>
                    <li><input type="radio" name="slider_q3" value="4" /></li>
                    <li><input type="radio" name="slider_q3" value="5" /></li>
                    <li><input type="radio" name="slider_q3" value="6" /></li>
                    <li><input type="radio" name="slider_q3" value="7" /></li>
                    <li class="labels1">{{ q1_slider_right }}</li>
                </ul>
            </div>

            <button id="next">Continue</button>

            <p id="error" class="help-text" style="display: none;">Please answer all three questions above before continuing.</p>

        </div>
        </script>

        <!-- Stage 2 view: Feature listing -->
        <script id="stage2-view" type="text/html">
        <div class="view">
            <!-- Image at the top -->
            <div style="text-align: center; margin-bottom: 20px;">
                <img src="{{ image }}" alt="Person" style="max-width: 350px; max-height: 350px; border: 1px solid #ccc;">
            </div>

            <!-- Question 1: Typical features -->
            <div class="question-box" style="margin-bottom: 20px;">
                <p class="question">Please list three features of the person’s appearance that led you to associate them with {{ article }} <strong>{{ category }}</strong>.</p>
                <div style="margin-top: 15px;">
                    <label style="display: block; margin-bottom: 10px;">1. <input type="text" id="typical1" style="width: 80%; margin-left: 10px;" /></label>
                    <label style="display: block; margin-bottom: 10px;">2. <input type="text" id="typical2" style="width: 80%; margin-left: 10px;" /></label>
                    <label style="display: block; margin-bottom: 10px;">3. <input type="text" id="typical3" style="width: 80%; margin-left: 10px;" /></label>
                </div>
            </div>

            <!-- Question 2: Atypical features (optional) -->
            <div class="question-box" style="margin-bottom: 20px;">
                <p class="question">If there are any, name at least one feature of the person’s appearance that seemed <strong>unusual or atypical</strong> for someone you would associate with {{ article }} <strong>{{ category }}</strong>. (Optional)</p>
                <div style="margin-top: 15px;">
                    <label style="display: block; margin-bottom: 10px;">1. <input type="text" id="atypical1" style="width: 80%; margin-left: 10px;" /></label>
                    <label style="display: block; margin-bottom: 10px;">2. <input type="text" id="atypical2" style="width: 80%; margin-left: 10px;" /></label>
                    <label style="display: block; margin-bottom: 10px;">3. <input type="text" id="atypical3" style="width: 80%; margin-left: 10px;" /></label>
                </div>
            </div>

            <button id="next">Continue</button>

            <p id="error" class="help-text" style="display: none;">Please list all three typical features before continuing.</p>

        </div>
        </script>

        <!-- AI classification view -->
        <script id="aiclassification-view" type="text/html">
            <div class="view">
                <!-- <h1> Some title </h1>
                <br> -->
                <div style="text-align: center; margin-bottom: 20px;">
                    <img src="{{ image }}" alt="Person" style="max-width: 350px; max-height: 350px; border: 1px solid #ccc;">
                </div>
                <section class="text-container">
                    <p class="text">Which of the following statements do you think is true for the above image? (If you can't decide, select "Not sure.")</p>
                    <form id="quiz-form" style="text-align: left;">
                        <label style="display: block; margin: 10px 0; font-family: 'Lato', 'Noto Sans', sans-serif; font-size: 17px; line-height: 27px; color: rgba(0, 0, 0, 0.87);">
                        <input type="radio" name="answer" id="answer" value= "A">
                        {{ optionA_text }}
                        </label>

                        <label style="display: block; margin: 10px 0; font-family: 'Lato', 'Noto Sans', sans-serif; font-size: 17px; line-height: 27px; color: rgba(0, 0, 0, 0.87);">
                        <input type="radio" name="answer" id="answer" value="B">
                        {{ optionB_text }}
                        </label>

                        <label style="display: block; margin: 10px 0; font-family: 'Lato', 'Noto Sans', sans-serif; font-size: 17px; line-height: 27px; color: rgba(0, 0, 0, 0.87);">
                        <input type="radio" name="answer" id="answer" value="C">
                        {{ optionC_text }}
                        </label>
                    </form>
                </section>
                <br>
                <button id="next">Continue</button>

                <p id="error" class="help-text" style="display: none;">Please select one of the three statements before continuing.</p>
            </div>
        </script>

        <!-- post test view -->
        <script id="post-test-view" type="text/html">
        <div class="view post-test-templ">
            {{# title }}
            <h1>{{ title }}</h1>
            {{/ title }}
            {{# text }}
            <section class="text-container">
                <p class="text">{{ text }}</p>
            </section>
            {{/ text }}
            <form>
            <p>
                <label for="HitCorrect">Did you read the instructions and do you think you did the study correctly?</label>
                <select id="HitCorrect" name="HitCorrect">
                    <option></option>
                    <option value="0">No</option>
                    <option value="1">Yes</option>
                    <option value="404">I was confused</option>
                </select>
            </p>
            <p>
                <label for="age">Age:</label>
                <input type="number" name="age" min="18" max="110" id="age" />
            </p>
            <p>
                <label for="gender">Gender:</label>
                <select id="gender" name="gender" onchange="toggleTextbox()">
                    <option></option>
                    <option value="male">Male</option>
                    <option value="female">Female</option>
                    <option value="other">Other</option>
                </select>
            </p>
            
            <!-- Initially hidden textbox for "Other" selection -->
            <p id="other-gender-container" style="display: none;">
                <label for="other-gender">Please specify:</label>
                <input type="text" id="other-gender" name="other-gender" placeholder="Enter your gender">
            
            <!-- <p>
                <label for="education">Level of Education:</label>
                <select id="education" name="education">
                    <option></option>
                    <option value="some_high_school">Some High School</option>
                    <option value="graduated_high_school">Graduated High School</option>
                    <option value="some_college">Some College</option>
                    <option value="graduated_college">Graduated College</option>
                    <option value="higher_degree">Hold a Higher Degree</option>
                </select>
            </p> -->
            <p>
                <label for="languages" name="languages">Native Languages: <br /><span>(i.e. the language(s) spoken at home when you were a child)</</span></label>
                <input type="text" id="languages"/>
            </p>
            <p>
                <label for="race">What is your race?</label>
                <select id="race" name="race" onchange="toggleRaceTextbox()">
                    <option></option>
                    <option value="asian">Asian/Asian American</option>
                    <option value="black">Black/Black American</option>
                    <option value="latino">Latino/Latino American</option>
                    <option value="white">White/European American</option>
                    <option value="biracial_other">Biracial/Other</option>
                </select>
            </p>
            
            <!-- Initially hidden textbox for "Biracial/Other" selection -->
            <p id="other-race-container" style="display: none;">
                <label for="other-race">Please specify:</label>
                <input type="text" id="other-race" name="other-race" placeholder="Enter your race">
            </p>
            
            <p>
                <label for="sexual-orientation">What is your sexual orientation?</label>
                <select id="sexual-orientation" name="sexual-orientation">
                    <option></option>
                    <option value="heterosexual">Heterosexual</option>
                    <option value="gay_lesbian_queer">Gay / Lesbian / Queer</option>
                    <option value="bisexual">Bisexual</option>
                    <option value="not_sure">Not sure</option>
                </select>
            </p>
            
            <p>
                <label for="education">What is the highest level of education that you have received?</label>
                <select id="education" name="education">
                    <option></option>
                    <option value="less_than_high_school">Less than high school</option>
                    <option value="high_school">High school diploma</option>
                    <option value="some_college">Some college</option>
                    <option value="associate">Associate's degree</option>
                    <option value="bachelor">Bachelor's degree</option>
                    <option value="some_grad">Some graduate school</option>
                    <option value="master">Master's degree</option>
                    <option value="doctoral">Doctoral degree</option>
                </select>
            </p>
            
            <p>
                <label for="zipcode">What is your ZIP code?</label>
                <input type="text" id="zipcode" name="zipcode" maxlength="10" placeholder="Enter ZIP code" />
            </p>
            
            <p>
                <label for="lgbt-percentage">Just your best guess: What percentage of the people who live in your ZIP code region are lesbian, gay, or bisexual?</label>
                <input type="number" id="lgbt-percentage" name="lgbt-percentage" min="0" max="100" placeholder="Enter percentage (0-100)" />
            </p>
            
            <p>
                <label for="enjoyment">Enjoyment:</label>
                <select id="enjoyment" name="enjoyment">
                    <option></option>
                    <option value="0">Worse than the Average Study</option>
                    <option value="1">Average Study</option>
                    <option value="2">Better than the Average Study</option>
                </select>
            </p>
            <!-- removed the below because we added a third question-->
            <!-- <p class="difficulties-sect">
                <label for="difficulties">Did you find any of the images out of place in their articles? (If so, which one(s) and why?)</label>
                <textarea name="difficulties" id="difficulties" rows="6" cols="40"></textarea>
            </p> -->
            <p class="comment-sect">
                <label for="comments">Further Comments:</label>
                <textarea name="comments" id="comments"
                rows="6" cols="40"></textarea>
            </p>
            {{# buttonText }}
            <button id="next">{{ buttonText }}</button>
            {{/ buttonText }}
            {{^ buttonText }}
            <button id="next">Next</button>
            {{/ buttonText }}
            </form>
            </div>
        </script>

        <!-- Thanks View -->
        <script id="thanks-view" type="x-tmpl-mustache">
        <div class="view thanks-templ">
            <h4 class="warning-message">submitting the data
                <div class="loader"></div>
            </h4>
            {{# thanksMessage }}
            <h1 class="thanks-message nodisplay">{{ thanksMessage }}</h1>
            {{/ thanksMessage }}
            {{^ thanksMessage }}
            <h1 class="thanks-message nodisplay">Thank you for taking part in this experiment!</h1>
            {{/ thanksMessage }}
            {{# extraMessage }}
            <h2 class="extra-message nodisplay">{{{ extraMessage }}}</h2>
            {{/ extraMessage }}
        </div>
        </script>
    </body>
</html>
